{
  "version": 3,
  "sources": ["../bundle-FXRvz8/checked-fetch.js", "../../../../../home/codespace/.npm/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/common.ts", "../../../../../home/codespace/.npm/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/loader-sw.ts", "../../../../../home/codespace/.npm/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts", "../../../../../home/codespace/.npm/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts", "../bundle-FXRvz8/middleware-insertion-facade.js", "../../../dist/sw.js"],
  "sourceRoot": "/workspaces/bare-server-workers/.wrangler/tmp/dev-yCtYX7",
  "sourcesContent": ["const urls = new Set();\n\nfunction checkURL(request, init) {\n\tconst url =\n\t\trequest instanceof URL\n\t\t\t? request\n\t\t\t: new URL(\n\t\t\t\t\t(typeof request === \"string\"\n\t\t\t\t\t\t? new Request(request, init)\n\t\t\t\t\t\t: request\n\t\t\t\t\t).url\n\t\t\t  );\n\tif (url.port && url.port !== \"443\" && url.protocol === \"https:\") {\n\t\tif (!urls.has(url.toString())) {\n\t\t\turls.add(url.toString());\n\t\t\tconsole.warn(\n\t\t\t\t`WARNING: known issue with \\`fetch()\\` requests to custom HTTPS ports in published Workers:\\n` +\n\t\t\t\t\t` - ${url.toString()} - the custom port will be ignored when the Worker is published using the \\`wrangler deploy\\` command.\\n`\n\t\t\t);\n\t\t}\n\t}\n}\n\nglobalThis.fetch = new Proxy(globalThis.fetch, {\n\tapply(target, thisArg, argArray) {\n\t\tconst [request, init] = argArray;\n\t\tcheckURL(request, init);\n\t\treturn Reflect.apply(target, thisArg, argArray);\n\t},\n});\n", "export type Awaitable<T> = T | Promise<T>;\n// TODO: allow dispatching more events?\nexport type Dispatcher = (\n\ttype: \"scheduled\",\n\tinit: { cron?: string }\n) => Awaitable<void>;\n\nexport type IncomingRequest = Request<\n\tunknown,\n\tIncomingRequestCfProperties<unknown>\n>;\n\nexport interface MiddlewareContext {\n\tdispatch: Dispatcher;\n\tnext(request: IncomingRequest, env: any): Awaitable<Response>;\n}\n\nexport type Middleware = (\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tmiddlewareCtx: MiddlewareContext\n) => Awaitable<Response>;\n\nconst __facade_middleware__: Middleware[] = [];\n\n// The register functions allow for the insertion of one or many middleware,\n// We register internal middleware first in the stack, but have no way of controlling\n// the order that addMiddleware is run in service workers so need an internal function.\nexport function __facade_register__(...args: (Middleware | Middleware[])[]) {\n\t__facade_middleware__.push(...args.flat());\n}\nexport function __facade_registerInternal__(\n\t...args: (Middleware | Middleware[])[]\n) {\n\t__facade_middleware__.unshift(...args.flat());\n}\n\nfunction __facade_invokeChain__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tmiddlewareChain: Middleware[]\n): Awaitable<Response> {\n\tconst [head, ...tail] = middlewareChain;\n\tconst middlewareCtx: MiddlewareContext = {\n\t\tdispatch,\n\t\tnext(newRequest, newEnv) {\n\t\t\treturn __facade_invokeChain__(newRequest, newEnv, ctx, dispatch, tail);\n\t\t},\n\t};\n\treturn head(request, env, ctx, middlewareCtx);\n}\n\nexport function __facade_invoke__(\n\trequest: IncomingRequest,\n\tenv: any,\n\tctx: ExecutionContext,\n\tdispatch: Dispatcher,\n\tfinalMiddleware: Middleware\n): Awaitable<Response> {\n\treturn __facade_invokeChain__(request, env, ctx, dispatch, [\n\t\t...__facade_middleware__,\n\t\tfinalMiddleware,\n\t]);\n}\n", "import {\n\t__facade_invoke__,\n\t__facade_register__,\n\t__facade_registerInternal__,\n\tAwaitable,\n\tDispatcher,\n\tIncomingRequest,\n\tMiddleware,\n} from \"./common\";\n\nexport { __facade_register__, __facade_registerInternal__ };\n\n// Miniflare 2's `EventTarget` follows the spec and doesn't allow exceptions to\n// be caught by `dispatchEvent`. Instead it has a custom `ThrowingEventTarget`\n// class that rethrows errors from event listeners in `dispatchEvent`.\n// We'd like errors to be propagated to the top-level `addEventListener`, so\n// we'd like to use `ThrowingEventTarget`. Unfortunately, `ThrowingEventTarget`\n// isn't exposed on the global scope, but `WorkerGlobalScope` (which extends\n// `ThrowingEventTarget`) is. Therefore, we get at it in this nasty way.\nlet __FACADE_EVENT_TARGET__: EventTarget;\nif ((globalThis as any).MINIFLARE) {\n\t__FACADE_EVENT_TARGET__ = new (Object.getPrototypeOf(WorkerGlobalScope))();\n} else {\n\t__FACADE_EVENT_TARGET__ = new EventTarget();\n}\n\nfunction __facade_isSpecialEvent__(\n\ttype: string\n): type is \"fetch\" | \"scheduled\" {\n\treturn type === \"fetch\" || type === \"scheduled\";\n}\nconst __facade__originalAddEventListener__ = globalThis.addEventListener;\nconst __facade__originalRemoveEventListener__ = globalThis.removeEventListener;\nconst __facade__originalDispatchEvent__ = globalThis.dispatchEvent;\n\nglobalThis.addEventListener = function (type, listener, options) {\n\tif (__facade_isSpecialEvent__(type)) {\n\t\t__FACADE_EVENT_TARGET__.addEventListener(\n\t\t\ttype,\n\t\t\tlistener as EventListenerOrEventListenerObject,\n\t\t\toptions\n\t\t);\n\t} else {\n\t\t__facade__originalAddEventListener__(type, listener, options);\n\t}\n};\nglobalThis.removeEventListener = function (type, listener, options) {\n\tif (__facade_isSpecialEvent__(type)) {\n\t\t__FACADE_EVENT_TARGET__.removeEventListener(\n\t\t\ttype,\n\t\t\tlistener as EventListenerOrEventListenerObject,\n\t\t\toptions\n\t\t);\n\t} else {\n\t\t__facade__originalRemoveEventListener__(type, listener, options);\n\t}\n};\nglobalThis.dispatchEvent = function (event) {\n\tif (__facade_isSpecialEvent__(event.type)) {\n\t\treturn __FACADE_EVENT_TARGET__.dispatchEvent(event);\n\t} else {\n\t\treturn __facade__originalDispatchEvent__(event);\n\t}\n};\n\ndeclare global {\n\tvar addMiddleware: typeof __facade_register__;\n\tvar addMiddlewareInternal: typeof __facade_registerInternal__;\n}\nglobalThis.addMiddleware = __facade_register__;\nglobalThis.addMiddlewareInternal = __facade_registerInternal__;\n\nconst __facade_waitUntil__ = Symbol(\"__facade_waitUntil__\");\nconst __facade_response__ = Symbol(\"__facade_response__\");\nconst __facade_dispatched__ = Symbol(\"__facade_dispatched__\");\n\nclass __Facade_ExtendableEvent__ extends Event {\n\t[__facade_waitUntil__]: Awaitable<unknown>[] = [];\n\n\twaitUntil(promise: Awaitable<any>) {\n\t\tif (!(this instanceof __Facade_ExtendableEvent__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\tthis[__facade_waitUntil__].push(promise);\n\t}\n}\n\ninterface FetchEventInit extends EventInit {\n\trequest: Request;\n\tpassThroughOnException: FetchEvent[\"passThroughOnException\"];\n}\n\nclass __Facade_FetchEvent__ extends __Facade_ExtendableEvent__ {\n\t#request: Request;\n\t#passThroughOnException: FetchEvent[\"passThroughOnException\"];\n\t[__facade_response__]?: Awaitable<Response>;\n\t[__facade_dispatched__] = false;\n\n\tconstructor(type: \"fetch\", init: FetchEventInit) {\n\t\tsuper(type);\n\t\tthis.#request = init.request;\n\t\tthis.#passThroughOnException = init.passThroughOnException;\n\t}\n\n\tget request() {\n\t\treturn this.#request;\n\t}\n\n\trespondWith(response: Awaitable<Response>) {\n\t\tif (!(this instanceof __Facade_FetchEvent__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\tif (this[__facade_response__] !== undefined) {\n\t\t\tthrow new DOMException(\n\t\t\t\t\"FetchEvent.respondWith() has already been called; it can only be called once.\",\n\t\t\t\t\"InvalidStateError\"\n\t\t\t);\n\t\t}\n\t\tif (this[__facade_dispatched__]) {\n\t\t\tthrow new DOMException(\n\t\t\t\t\"Too late to call FetchEvent.respondWith(). It must be called synchronously in the event handler.\",\n\t\t\t\t\"InvalidStateError\"\n\t\t\t);\n\t\t}\n\t\tthis.stopImmediatePropagation();\n\t\tthis[__facade_response__] = response;\n\t}\n\n\tpassThroughOnException() {\n\t\tif (!(this instanceof __Facade_FetchEvent__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#passThroughOnException();\n\t}\n}\n\ninterface ScheduledEventInit extends EventInit {\n\tscheduledTime: number;\n\tcron: string;\n\tnoRetry: ScheduledEvent[\"noRetry\"];\n}\n\nclass __Facade_ScheduledEvent__ extends __Facade_ExtendableEvent__ {\n\t#scheduledTime: number;\n\t#cron: string;\n\t#noRetry: ScheduledEvent[\"noRetry\"];\n\n\tconstructor(type: \"scheduled\", init: ScheduledEventInit) {\n\t\tsuper(type);\n\t\tthis.#scheduledTime = init.scheduledTime;\n\t\tthis.#cron = init.cron;\n\t\tthis.#noRetry = init.noRetry;\n\t}\n\n\tget scheduledTime() {\n\t\treturn this.#scheduledTime;\n\t}\n\n\tget cron() {\n\t\treturn this.#cron;\n\t}\n\n\tnoRetry() {\n\t\tif (!(this instanceof __Facade_ScheduledEvent__)) {\n\t\t\tthrow new TypeError(\"Illegal invocation\");\n\t\t}\n\t\t// Need to call native method immediately in case uncaught error thrown\n\t\tthis.#noRetry();\n\t}\n}\n\n__facade__originalAddEventListener__(\"fetch\", (event) => {\n\tconst ctx: ExecutionContext = {\n\t\twaitUntil: event.waitUntil.bind(event),\n\t\tpassThroughOnException: event.passThroughOnException.bind(event),\n\t};\n\n\tconst __facade_sw_dispatch__: Dispatcher = function (type, init) {\n\t\tif (type === \"scheduled\") {\n\t\t\tconst facadeEvent = new __Facade_ScheduledEvent__(\"scheduled\", {\n\t\t\t\tscheduledTime: Date.now(),\n\t\t\t\tcron: init.cron ?? \"\",\n\t\t\t\tnoRetry() {},\n\t\t\t});\n\n\t\t\t__FACADE_EVENT_TARGET__.dispatchEvent(facadeEvent);\n\t\t\tevent.waitUntil(Promise.all(facadeEvent[__facade_waitUntil__]));\n\t\t}\n\t};\n\n\tconst __facade_sw_fetch__: Middleware = function (request, _env, ctx) {\n\t\tconst facadeEvent = new __Facade_FetchEvent__(\"fetch\", {\n\t\t\trequest,\n\t\t\tpassThroughOnException: ctx.passThroughOnException,\n\t\t});\n\n\t\t__FACADE_EVENT_TARGET__.dispatchEvent(facadeEvent);\n\t\tfacadeEvent[__facade_dispatched__] = true;\n\t\tevent.waitUntil(Promise.all(facadeEvent[__facade_waitUntil__]));\n\n\t\tconst response = facadeEvent[__facade_response__];\n\t\tif (response === undefined) {\n\t\t\tthrow new Error(\"No response!\"); // TODO: proper error message\n\t\t}\n\t\treturn response;\n\t};\n\n\tevent.respondWith(\n\t\t__facade_invoke__(\n\t\t\tevent.request as IncomingRequest,\n\t\t\tglobalThis,\n\t\t\tctx,\n\t\t\t__facade_sw_dispatch__,\n\t\t\t__facade_sw_fetch__\n\t\t)\n\t);\n});\n\n__facade__originalAddEventListener__(\"scheduled\", (event) => {\n\tconst facadeEvent = new __Facade_ScheduledEvent__(\"scheduled\", {\n\t\tscheduledTime: event.scheduledTime,\n\t\tcron: event.cron,\n\t\tnoRetry: event.noRetry.bind(event),\n\t});\n\n\t__FACADE_EVENT_TARGET__.dispatchEvent(facadeEvent);\n\tevent.waitUntil(Promise.all(facadeEvent[__facade_waitUntil__]));\n});\n", "import type { Middleware } from \"./common\";\n\nconst drainBody: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} finally {\n\t\ttry {\n\t\t\tif (request.body !== null && !request.bodyUsed) {\n\t\t\t\tconst reader = request.body.getReader();\n\t\t\t\twhile (!(await reader.read()).done) {}\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tconsole.error(\"Failed to drain the unused request body.\", e);\n\t\t}\n\t}\n};\n\nexport default drainBody;\n", "import type { Middleware } from \"./common\";\n\ninterface JsonError {\n\tmessage?: string;\n\tname?: string;\n\tstack?: string;\n\tcause?: JsonError;\n}\n\nfunction reduceError(e: any): JsonError {\n\treturn {\n\t\tname: e?.name,\n\t\tmessage: e?.message ?? String(e),\n\t\tstack: e?.stack,\n\t\tcause: e?.cause === undefined ? undefined : reduceError(e.cause),\n\t};\n}\n\n// See comment in `bundle.ts` for details on why this is needed\nconst jsonError: Middleware = async (request, env, _ctx, middlewareCtx) => {\n\ttry {\n\t\treturn await middlewareCtx.next(request, env);\n\t} catch (e: any) {\n\t\tconst error = reduceError(e);\n\t\treturn Response.json(error, {\n\t\t\tstatus: 500,\n\t\t\theaders: { \"MF-Experimental-Error-Stack\": \"true\" },\n\t\t});\n\t}\n};\n\nexport default jsonError;\n", "\t\t\t\timport { __facade_registerInternal__ } from \"/home/codespace/.npm/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/loader-sw.ts\";\n\t\t\t\timport * as __MIDDLEWARE_0__ from \"/home/codespace/.npm/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/middleware-ensure-req-body-drained.ts\";\nimport * as __MIDDLEWARE_1__ from \"/home/codespace/.npm/_npx/32026684e21afda6/node_modules/wrangler/templates/middleware/middleware-miniflare3-json-error.ts\";\n\t\t\t\t__facade_registerInternal__([__MIDDLEWARE_0__.default,__MIDDLEWARE_1__.default])", "class KVAdapter {\n  ns;\n\n  constructor(ns) {\n    this.ns = ns;\n  }\n\n  async get(key) {\n    return await this.ns.get(key);\n  }\n\n  async set(key, value) {\n    await this.ns.put(key, value);\n  }\n\n  async has(key) {\n    return (await this.ns.list()).keys.some(e => e.name === key);\n  }\n\n  async delete(key) {\n    await this.ns.delete(key);\n    return true;\n  }\n\n  async *entries() {\n    for (const {\n      name\n    } of (await this.ns.list()).keys) yield [name, await this.get(name)];\n  }\n\n}\n\n/**\n * @internal\n */\nclass JSONDatabaseAdapter {\n  impl;\n\n  constructor(impl) {\n    this.impl = impl;\n  }\n\n  async get(key) {\n    const res = await this.impl.get(key);\n    if (typeof res === 'string') return JSON.parse(res);\n  }\n\n  async set(key, value) {\n    return await this.impl.set(key, JSON.stringify(value));\n  }\n\n  async has(key) {\n    return await this.impl.has(key);\n  }\n\n  async delete(key) {\n    return await this.impl.delete(key);\n  }\n\n  async *[Symbol.asyncIterator]() {\n    for await (const [id, value] of await this.impl.entries()) {\n      yield [id, JSON.parse(value)];\n    }\n  }\n\n}\n/**\n * Routine\n */\n\nasync function cleanupDatabase(database) {\n  const adapter = new JSONDatabaseAdapter(database);\n\n  for await (const [id, {\n    expires\n  }] of adapter) if (expires < Date.now()) database.delete(id);\n}\n\nvar httpErrors = {exports: {}};\n\n/*!\n * depd\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n/**\n * Module exports.\n * @public\n */\n\nvar browser = depd;\n\n/**\n * Create deprecate for namespace in caller.\n */\n\nfunction depd (namespace) {\n  if (!namespace) {\n    throw new TypeError('argument namespace is required')\n  }\n\n  function deprecate (message) {\n    // no-op in browser\n  }\n\n  deprecate._file = undefined;\n  deprecate._ignored = true;\n  deprecate._namespace = namespace;\n  deprecate._traced = false;\n  deprecate._warned = Object.create(null);\n\n  deprecate.function = wrapfunction;\n  deprecate.property = wrapproperty;\n\n  return deprecate\n}\n\n/**\n * Return a wrapped function in a deprecation message.\n *\n * This is a no-op version of the wrapper, which does nothing but call\n * validation.\n */\n\nfunction wrapfunction (fn, message) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('argument fn must be a function')\n  }\n\n  return fn\n}\n\n/**\n * Wrap property in a deprecation message.\n *\n * This is a no-op version of the wrapper, which does nothing but call\n * validation.\n */\n\nfunction wrapproperty (obj, prop, message) {\n  if (!obj || (typeof obj !== 'object' && typeof obj !== 'function')) {\n    throw new TypeError('argument obj must be object')\n  }\n\n  var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n\n  if (!descriptor) {\n    throw new TypeError('must call property on owner object')\n  }\n\n  if (!descriptor.configurable) {\n    throw new TypeError('property must be configurable')\n  }\n}\n\n/* eslint no-proto: 0 */\nvar setprototypeof = Object.setPrototypeOf || ({ __proto__: [] } instanceof Array ? setProtoOf : mixinProperties);\n\nfunction setProtoOf (obj, proto) {\n  obj.__proto__ = proto;\n  return obj\n}\n\nfunction mixinProperties (obj, proto) {\n  for (var prop in proto) {\n    if (!Object.prototype.hasOwnProperty.call(obj, prop)) {\n      obj[prop] = proto[prop];\n    }\n  }\n  return obj\n}\n\nvar require$$0 = {\n\t\"100\": \"Continue\",\n\t\"101\": \"Switching Protocols\",\n\t\"102\": \"Processing\",\n\t\"103\": \"Early Hints\",\n\t\"200\": \"OK\",\n\t\"201\": \"Created\",\n\t\"202\": \"Accepted\",\n\t\"203\": \"Non-Authoritative Information\",\n\t\"204\": \"No Content\",\n\t\"205\": \"Reset Content\",\n\t\"206\": \"Partial Content\",\n\t\"207\": \"Multi-Status\",\n\t\"208\": \"Already Reported\",\n\t\"226\": \"IM Used\",\n\t\"300\": \"Multiple Choices\",\n\t\"301\": \"Moved Permanently\",\n\t\"302\": \"Found\",\n\t\"303\": \"See Other\",\n\t\"304\": \"Not Modified\",\n\t\"305\": \"Use Proxy\",\n\t\"307\": \"Temporary Redirect\",\n\t\"308\": \"Permanent Redirect\",\n\t\"400\": \"Bad Request\",\n\t\"401\": \"Unauthorized\",\n\t\"402\": \"Payment Required\",\n\t\"403\": \"Forbidden\",\n\t\"404\": \"Not Found\",\n\t\"405\": \"Method Not Allowed\",\n\t\"406\": \"Not Acceptable\",\n\t\"407\": \"Proxy Authentication Required\",\n\t\"408\": \"Request Timeout\",\n\t\"409\": \"Conflict\",\n\t\"410\": \"Gone\",\n\t\"411\": \"Length Required\",\n\t\"412\": \"Precondition Failed\",\n\t\"413\": \"Payload Too Large\",\n\t\"414\": \"URI Too Long\",\n\t\"415\": \"Unsupported Media Type\",\n\t\"416\": \"Range Not Satisfiable\",\n\t\"417\": \"Expectation Failed\",\n\t\"418\": \"I'm a Teapot\",\n\t\"421\": \"Misdirected Request\",\n\t\"422\": \"Unprocessable Entity\",\n\t\"423\": \"Locked\",\n\t\"424\": \"Failed Dependency\",\n\t\"425\": \"Too Early\",\n\t\"426\": \"Upgrade Required\",\n\t\"428\": \"Precondition Required\",\n\t\"429\": \"Too Many Requests\",\n\t\"431\": \"Request Header Fields Too Large\",\n\t\"451\": \"Unavailable For Legal Reasons\",\n\t\"500\": \"Internal Server Error\",\n\t\"501\": \"Not Implemented\",\n\t\"502\": \"Bad Gateway\",\n\t\"503\": \"Service Unavailable\",\n\t\"504\": \"Gateway Timeout\",\n\t\"505\": \"HTTP Version Not Supported\",\n\t\"506\": \"Variant Also Negotiates\",\n\t\"507\": \"Insufficient Storage\",\n\t\"508\": \"Loop Detected\",\n\t\"509\": \"Bandwidth Limit Exceeded\",\n\t\"510\": \"Not Extended\",\n\t\"511\": \"Network Authentication Required\"\n};\n\n/*!\n * statuses\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2016 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n/**\n * Module dependencies.\n * @private\n */\n\nvar codes = require$$0;\n\n/**\n * Module exports.\n * @public\n */\n\nvar statuses = status;\n\n// status code to message map\nstatus.message = codes;\n\n// status message (lower-case) to code map\nstatus.code = createMessageToStatusCodeMap(codes);\n\n// array of status codes\nstatus.codes = createStatusCodeList(codes);\n\n// status codes for redirects\nstatus.redirect = {\n  300: true,\n  301: true,\n  302: true,\n  303: true,\n  305: true,\n  307: true,\n  308: true\n};\n\n// status codes for empty bodies\nstatus.empty = {\n  204: true,\n  205: true,\n  304: true\n};\n\n// status codes for when you should retry the request\nstatus.retry = {\n  502: true,\n  503: true,\n  504: true\n};\n\n/**\n * Create a map of message to status code.\n * @private\n */\n\nfunction createMessageToStatusCodeMap (codes) {\n  var map = {};\n\n  Object.keys(codes).forEach(function forEachCode (code) {\n    var message = codes[code];\n    var status = Number(code);\n\n    // populate map\n    map[message.toLowerCase()] = status;\n  });\n\n  return map\n}\n\n/**\n * Create a list of all status codes.\n * @private\n */\n\nfunction createStatusCodeList (codes) {\n  return Object.keys(codes).map(function mapCode (code) {\n    return Number(code)\n  })\n}\n\n/**\n * Get the status code for given message.\n * @private\n */\n\nfunction getStatusCode (message) {\n  var msg = message.toLowerCase();\n\n  if (!Object.prototype.hasOwnProperty.call(status.code, msg)) {\n    throw new Error('invalid status message: \"' + message + '\"')\n  }\n\n  return status.code[msg]\n}\n\n/**\n * Get the status message for given code.\n * @private\n */\n\nfunction getStatusMessage (code) {\n  if (!Object.prototype.hasOwnProperty.call(status.message, code)) {\n    throw new Error('invalid status code: ' + code)\n  }\n\n  return status.message[code]\n}\n\n/**\n * Get the status code.\n *\n * Given a number, this will throw if it is not a known status\n * code, otherwise the code will be returned. Given a string,\n * the string will be parsed for a number and return the code\n * if valid, otherwise will lookup the code assuming this is\n * the status message.\n *\n * @param {string|number} code\n * @returns {number}\n * @public\n */\n\nfunction status (code) {\n  if (typeof code === 'number') {\n    return getStatusMessage(code)\n  }\n\n  if (typeof code !== 'string') {\n    throw new TypeError('code must be a number or string')\n  }\n\n  // '403'\n  var n = parseInt(code, 10);\n  if (!isNaN(n)) {\n    return getStatusMessage(n)\n  }\n\n  return getStatusCode(code)\n}\n\nvar inherits_browser = {exports: {}};\n\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  inherits_browser.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor;\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n    }\n  };\n} else {\n  // old school shim for old browsers\n  inherits_browser.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor;\n      var TempCtor = function () {};\n      TempCtor.prototype = superCtor.prototype;\n      ctor.prototype = new TempCtor();\n      ctor.prototype.constructor = ctor;\n    }\n  };\n}\n\n/*!\n * toidentifier\n * Copyright(c) 2016 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n/**\n * Module exports.\n * @public\n */\n\nvar toidentifier = toIdentifier;\n\n/**\n * Trasform the given string into a JavaScript identifier\n *\n * @param {string} str\n * @returns {string}\n * @public\n */\n\nfunction toIdentifier (str) {\n  return str\n    .split(' ')\n    .map(function (token) {\n      return token.slice(0, 1).toUpperCase() + token.slice(1)\n    })\n    .join('')\n    .replace(/[^ _0-9a-z]/gi, '')\n}\n\n/*!\n * http-errors\n * Copyright(c) 2014 Jonathan Ong\n * Copyright(c) 2016 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n(function (module) {\n\n\t/**\n\t * Module dependencies.\n\t * @private\n\t */\n\n\tbrowser('http-errors');\n\tvar setPrototypeOf = setprototypeof;\n\tvar statuses$1 = statuses;\n\tvar inherits = inherits_browser.exports;\n\tvar toIdentifier = toidentifier;\n\n\t/**\n\t * Module exports.\n\t * @public\n\t */\n\n\tmodule.exports = createError;\n\tmodule.exports.HttpError = createHttpErrorConstructor();\n\tmodule.exports.isHttpError = createIsHttpErrorFunction(module.exports.HttpError);\n\n\t// Populate exports for all constructors\n\tpopulateConstructorExports(module.exports, statuses$1.codes, module.exports.HttpError);\n\n\t/**\n\t * Get the code class of a status code.\n\t * @private\n\t */\n\n\tfunction codeClass (status) {\n\t  return Number(String(status).charAt(0) + '00')\n\t}\n\n\t/**\n\t * Create a new HTTP Error.\n\t *\n\t * @returns {Error}\n\t * @public\n\t */\n\n\tfunction createError () {\n\t  // so much arity going on ~_~\n\t  var err;\n\t  var msg;\n\t  var status = 500;\n\t  var props = {};\n\t  for (var i = 0; i < arguments.length; i++) {\n\t    var arg = arguments[i];\n\t    var type = typeof arg;\n\t    if (type === 'object' && arg instanceof Error) {\n\t      err = arg;\n\t      status = err.status || err.statusCode || status;\n\t    } else if (type === 'number' && i === 0) {\n\t      status = arg;\n\t    } else if (type === 'string') {\n\t      msg = arg;\n\t    } else if (type === 'object') {\n\t      props = arg;\n\t    } else {\n\t      throw new TypeError('argument #' + (i + 1) + ' unsupported type ' + type)\n\t    }\n\t  }\n\n\t  if (typeof status !== 'number' ||\n\t    (!statuses$1.message[status] && (status < 400 || status >= 600))) {\n\t    status = 500;\n\t  }\n\n\t  // constructor\n\t  var HttpError = createError[status] || createError[codeClass(status)];\n\n\t  if (!err) {\n\t    // create error\n\t    err = HttpError\n\t      ? new HttpError(msg)\n\t      : new Error(msg || statuses$1.message[status]);\n\t    Error.captureStackTrace(err, createError);\n\t  }\n\n\t  if (!HttpError || !(err instanceof HttpError) || err.status !== status) {\n\t    // add properties to generic error\n\t    err.expose = status < 500;\n\t    err.status = err.statusCode = status;\n\t  }\n\n\t  for (var key in props) {\n\t    if (key !== 'status' && key !== 'statusCode') {\n\t      err[key] = props[key];\n\t    }\n\t  }\n\n\t  return err\n\t}\n\n\t/**\n\t * Create HTTP error abstract base class.\n\t * @private\n\t */\n\n\tfunction createHttpErrorConstructor () {\n\t  function HttpError () {\n\t    throw new TypeError('cannot construct abstract class')\n\t  }\n\n\t  inherits(HttpError, Error);\n\n\t  return HttpError\n\t}\n\n\t/**\n\t * Create a constructor for a client error.\n\t * @private\n\t */\n\n\tfunction createClientErrorConstructor (HttpError, name, code) {\n\t  var className = toClassName(name);\n\n\t  function ClientError (message) {\n\t    // create the error object\n\t    var msg = message != null ? message : statuses$1.message[code];\n\t    var err = new Error(msg);\n\n\t    // capture a stack trace to the construction point\n\t    Error.captureStackTrace(err, ClientError);\n\n\t    // adjust the [[Prototype]]\n\t    setPrototypeOf(err, ClientError.prototype);\n\n\t    // redefine the error message\n\t    Object.defineProperty(err, 'message', {\n\t      enumerable: true,\n\t      configurable: true,\n\t      value: msg,\n\t      writable: true\n\t    });\n\n\t    // redefine the error name\n\t    Object.defineProperty(err, 'name', {\n\t      enumerable: false,\n\t      configurable: true,\n\t      value: className,\n\t      writable: true\n\t    });\n\n\t    return err\n\t  }\n\n\t  inherits(ClientError, HttpError);\n\t  nameFunc(ClientError, className);\n\n\t  ClientError.prototype.status = code;\n\t  ClientError.prototype.statusCode = code;\n\t  ClientError.prototype.expose = true;\n\n\t  return ClientError\n\t}\n\n\t/**\n\t * Create function to test is a value is a HttpError.\n\t * @private\n\t */\n\n\tfunction createIsHttpErrorFunction (HttpError) {\n\t  return function isHttpError (val) {\n\t    if (!val || typeof val !== 'object') {\n\t      return false\n\t    }\n\n\t    if (val instanceof HttpError) {\n\t      return true\n\t    }\n\n\t    return val instanceof Error &&\n\t      typeof val.expose === 'boolean' &&\n\t      typeof val.statusCode === 'number' && val.status === val.statusCode\n\t  }\n\t}\n\n\t/**\n\t * Create a constructor for a server error.\n\t * @private\n\t */\n\n\tfunction createServerErrorConstructor (HttpError, name, code) {\n\t  var className = toClassName(name);\n\n\t  function ServerError (message) {\n\t    // create the error object\n\t    var msg = message != null ? message : statuses$1.message[code];\n\t    var err = new Error(msg);\n\n\t    // capture a stack trace to the construction point\n\t    Error.captureStackTrace(err, ServerError);\n\n\t    // adjust the [[Prototype]]\n\t    setPrototypeOf(err, ServerError.prototype);\n\n\t    // redefine the error message\n\t    Object.defineProperty(err, 'message', {\n\t      enumerable: true,\n\t      configurable: true,\n\t      value: msg,\n\t      writable: true\n\t    });\n\n\t    // redefine the error name\n\t    Object.defineProperty(err, 'name', {\n\t      enumerable: false,\n\t      configurable: true,\n\t      value: className,\n\t      writable: true\n\t    });\n\n\t    return err\n\t  }\n\n\t  inherits(ServerError, HttpError);\n\t  nameFunc(ServerError, className);\n\n\t  ServerError.prototype.status = code;\n\t  ServerError.prototype.statusCode = code;\n\t  ServerError.prototype.expose = false;\n\n\t  return ServerError\n\t}\n\n\t/**\n\t * Set the name of a function, if possible.\n\t * @private\n\t */\n\n\tfunction nameFunc (func, name) {\n\t  var desc = Object.getOwnPropertyDescriptor(func, 'name');\n\n\t  if (desc && desc.configurable) {\n\t    desc.value = name;\n\t    Object.defineProperty(func, 'name', desc);\n\t  }\n\t}\n\n\t/**\n\t * Populate the exports object with constructors for every error class.\n\t * @private\n\t */\n\n\tfunction populateConstructorExports (exports, codes, HttpError) {\n\t  codes.forEach(function forEachCode (code) {\n\t    var CodeError;\n\t    var name = toIdentifier(statuses$1.message[code]);\n\n\t    switch (codeClass(code)) {\n\t      case 400:\n\t        CodeError = createClientErrorConstructor(HttpError, name, code);\n\t        break\n\t      case 500:\n\t        CodeError = createServerErrorConstructor(HttpError, name, code);\n\t        break\n\t    }\n\n\t    if (CodeError) {\n\t      // export the constructor\n\t      exports[code] = CodeError;\n\t      exports[name] = CodeError;\n\t    }\n\t  });\n\t}\n\n\t/**\n\t * Get a class name from a name identifier.\n\t * @private\n\t */\n\n\tfunction toClassName (name) {\n\t  return name.substr(-5) !== 'Error'\n\t    ? name + 'Error'\n\t    : name\n\t}\n} (httpErrors));\n\nvar createHttpError = httpErrors.exports;\n\nclass BareError extends Error {\n  status;\n  body;\n\n  constructor(status, body) {\n    super(body.message || body.code);\n    this.status = status;\n    this.body = body;\n  }\n\n}\nconst project = {\n  name: 'bare-server-worker',\n  description: 'TOMPHTTP Cloudflare Bare Server',\n  repository: 'https://github.com/tomphttp/bare-server-worker',\n  version: '1.2.2'\n};\nfunction json(status, json) {\n  return new Response(JSON.stringify(json, null, '\\t'), {\n    status,\n    headers: {\n      'content-type': 'application/json'\n    }\n  });\n}\nclass Server extends EventTarget {\n  routes = new Map();\n  socketRoutes = new Map();\n  closed = false;\n  directory;\n  options;\n  /**\n   * @internal\n   */\n\n  constructor(directory, options) {\n    super();\n    this.directory = directory;\n    this.options = options;\n  }\n  /**\n   * Remove all timers and listeners\n   */\n\n\n  close() {\n    this.closed = true;\n    this.dispatchEvent(new Event('close'));\n  }\n\n  shouldRoute(request) {\n    return !this.closed && new URL(request.url).pathname.startsWith(this.directory);\n  }\n\n  get instanceInfo() {\n    return {\n      versions: ['v1', 'v2'],\n      language: 'Cloudflare',\n      maintainer: this.options.maintainer,\n      project\n    };\n  }\n\n  async routeRequest(request) {\n    const service = new URL(request.url).pathname.slice(this.directory.length - 1);\n    let response;\n    const isSocket = request.headers.get('upgrade') === 'websocket';\n\n    try {\n      if (request.method === 'OPTIONS') {\n        response = new Response(undefined, {\n          status: 200\n        });\n      } else if (service === '/') {\n        response = json(200, this.instanceInfo);\n      } else if (!isSocket && this.routes.has(service)) {\n        const call = this.routes.get(service);\n        response = await call(request, this.options);\n      } else if (isSocket && this.socketRoutes.has(service)) {\n        const call = this.socketRoutes.get(service);\n        response = await call(request, this.options);\n      } else {\n        throw new createHttpError.NotFound();\n      }\n    } catch (error) {\n      if (this.options.logErrors) console.error(error);\n\n      if (createHttpError.isHttpError(error)) {\n        response = json(error.statusCode, {\n          code: 'UNKNOWN',\n          id: `error.${error.name}`,\n          message: error.message,\n          stack: error.stack\n        });\n      } else if (error instanceof Error) {\n        response = json(500, {\n          code: 'UNKNOWN',\n          id: `error.${error.name}`,\n          message: error.message,\n          stack: error.stack\n        });\n      } else {\n        response = json(500, {\n          code: 'UNKNOWN',\n          id: 'error.Exception',\n          message: error,\n          stack: new Error(error).stack\n        });\n      }\n\n      if (!(response instanceof Response)) {\n        if (this.options.logErrors) {\n          console.error('Cannot', request.method, new URL(request.url).pathname, ': Route did not return a response.');\n        }\n\n        throw new createHttpError.InternalServerError();\n      }\n    }\n\n    response.headers.set('x-robots-tag', 'noindex');\n    response.headers.set('access-control-allow-headers', '*');\n    response.headers.set('access-control-allow-origin', '*');\n    response.headers.set('access-control-allow-methods', '*');\n    response.headers.set('access-control-expose-headers', '*'); // don't fetch preflight on every request...\n    // instead, fetch preflight every 10 minutes\n\n    response.headers.set('access-control-max-age', '7200');\n    return response;\n  }\n\n}\n\nconst reserveChar = '%';\nfunction decodeProtocol(protocol) {\n  let result = '';\n\n  for (let i = 0; i < protocol.length; i++) {\n    const char = protocol[i];\n\n    if (char === reserveChar) {\n      const code = parseInt(protocol.slice(i + 1, i + 3), 16);\n      const decoded = String.fromCharCode(code);\n      result += decoded;\n      i += 2;\n    } else {\n      result += char;\n    }\n  }\n\n  return result;\n}\n\nfunction randomHex(byteLength) {\n  const bytes = new Uint8Array(byteLength);\n  crypto.getRandomValues(bytes);\n  let hex = '';\n\n  for (const byte of bytes) hex += byte.toString(16).padStart(2, '0');\n\n  return hex;\n}\nconst noBody = ['GET', 'HEAD'];\nasync function bareFetch(request, signal, requestHeaders, remote) {\n  return await fetch(`${remote.protocol}//${remote.host}:${remote.port}${remote.path}`, {\n    headers: requestHeaders,\n    method: request.method,\n    body: noBody.includes(request.method) ? undefined : await request.blob(),\n    signal,\n    redirect: 'manual'\n  });\n}\nasync function upgradeBareFetch(request, signal, requestHeaders, remote) {\n  const res = await fetch(`${remote.protocol}//${remote.host}:${remote.port}${remote.path}`, {\n    headers: requestHeaders,\n    method: request.method,\n    signal\n  });\n  if (!res.webSocket) throw new Error(\"server didn't accept WebSocket\");\n  return [res, res.webSocket];\n}\n\nconst validProtocols$1 = ['http:', 'https:', 'ws:', 'wss:'];\n\nfunction loadForwardedHeaders$1(forward, target, request) {\n  for (const header of forward) {\n    if (request.headers.has(header)) {\n      target[header] = request.headers.get(header);\n    }\n  }\n}\n\nfunction readHeaders$1(request) {\n  const remote = {};\n  const headers = {};\n  Reflect.setPrototypeOf(headers, null);\n\n  for (const remoteProp of ['host', 'port', 'protocol', 'path']) {\n    const header = `x-bare-${remoteProp}`;\n\n    if (request.headers.has(header)) {\n      const value = request.headers.get(header);\n\n      switch (remoteProp) {\n        case 'port':\n          if (isNaN(parseInt(value))) {\n            throw new BareError(400, {\n              code: 'INVALID_BARE_HEADER',\n              id: `request.headers.${header}`,\n              message: `Header was not a valid integer.`\n            });\n          }\n\n          break;\n\n        case 'protocol':\n          if (!validProtocols$1.includes(value)) {\n            throw new BareError(400, {\n              code: 'INVALID_BARE_HEADER',\n              id: `request.headers.${header}`,\n              message: `Header was invalid`\n            });\n          }\n\n          break;\n      }\n\n      remote[remoteProp] = value;\n    } else {\n      throw new BareError(400, {\n        code: 'MISSING_BARE_HEADER',\n        id: `request.headers.${header}`,\n        message: `Header was not specified.`\n      });\n    }\n  }\n\n  if (request.headers.has('x-bare-headers')) {\n    try {\n      const json = JSON.parse(request.headers.get('x-bare-headers'));\n\n      for (const header in json) {\n        if (typeof json[header] !== 'string' && !Array.isArray(json[header])) {\n          throw new BareError(400, {\n            code: 'INVALID_BARE_HEADER',\n            id: `bare.headers.${header}`,\n            message: `Header was not a String or Array.`\n          });\n        }\n      }\n\n      Object.assign(headers, json);\n    } catch (error) {\n      if (error instanceof SyntaxError) {\n        throw new BareError(400, {\n          code: 'INVALID_BARE_HEADER',\n          id: `request.headers.x-bare-headers`,\n          message: `Header contained invalid JSON. (${error.message})`\n        });\n      } else {\n        throw error;\n      }\n    }\n  } else {\n    throw new BareError(400, {\n      code: 'MISSING_BARE_HEADER',\n      id: `request.headers.x-bare-headers`,\n      message: `Header was not specified.`\n    });\n  }\n\n  if (request.headers.has('x-bare-forward-headers')) {\n    let json;\n\n    try {\n      json = JSON.parse(request.headers.get('x-bare-forward-headers'));\n    } catch (error) {\n      throw new BareError(400, {\n        code: 'INVALID_BARE_HEADER',\n        id: `request.headers.x-bare-forward-headers`,\n        message: `Header contained invalid JSON. (${error instanceof Error ? error.message : error})`\n      });\n    }\n\n    loadForwardedHeaders$1(json, headers, request);\n  } else {\n    throw new BareError(400, {\n      code: 'MISSING_BARE_HEADER',\n      id: `request.headers.x-bare-forward-headers`,\n      message: `Header was not specified.`\n    });\n  }\n\n  return {\n    remote: remote,\n    headers\n  };\n}\n\nconst tunnelRequest$1 = async request => {\n  const {\n    remote,\n    headers\n  } = readHeaders$1(request);\n  const response = await bareFetch(request, request.signal, headers, remote);\n  const responseHeaders = new Headers();\n\n  for (const [header, value] of response.headers) {\n    if (header === 'content-encoding' || header === 'x-content-encoding') responseHeaders.set('content-encoding', value);else if (header === 'content-length') responseHeaders.set('content-length', value);\n  }\n\n  responseHeaders.set('x-bare-headers', JSON.stringify(Object.fromEntries(response.headers)));\n  responseHeaders.set('x-bare-status', response.status.toString());\n  responseHeaders.set('x-bare-status-text', response.statusText);\n  return new Response(response.body, {\n    status: 200,\n    headers: responseHeaders\n  });\n};\n\nconst metaExpiration$1 = 30e3;\n\nconst wsMeta = async (request, options) => {\n  if (request.method === 'OPTIONS') {\n    return new Response(undefined, {\n      status: 200\n    });\n  }\n\n  if (!request.headers.has('x-bare-id')) {\n    throw new BareError(400, {\n      code: 'MISSING_BARE_HEADER',\n      id: 'request.headers.x-bare-id',\n      message: 'Header was not specified'\n    });\n  }\n\n  const id = request.headers.get('x-bare-id');\n  const meta = await options.database.get(id); // check if meta isn't undefined and if the version equals 1\n\n  if (meta?.value.v !== 1) throw new BareError(400, {\n    code: 'INVALID_BARE_HEADER',\n    id: 'request.headers.x-bare-id',\n    message: 'Unregistered ID'\n  });\n  await options.database.delete(id);\n  return json(200, {\n    headers: meta.value.response?.headers\n  });\n};\n\nconst wsNewMeta = async (request, options) => {\n  const id = randomHex(16);\n  await options.database.set(id, {\n    value: {\n      v: 1\n    },\n    expires: Date.now() + metaExpiration$1\n  });\n  return new Response(id);\n};\n\nconst tunnelSocket$1 = async (request, options) => {\n  const [firstProtocol, data] = request.headers.get('sec-websocket-protocol')?.split(/,\\s*/g) || [];\n  if (firstProtocol !== 'bare') throw new BareError(400, {\n    code: 'INVALID_BARE_HEADER',\n    id: `request.headers.sec-websocket-protocol`,\n    message: `Meta was not specified.`\n  });\n  const {\n    remote,\n    headers,\n    forward_headers: forwardHeaders,\n    id\n  } = JSON.parse(decodeProtocol(data));\n  loadForwardedHeaders$1(forwardHeaders, headers, request);\n  if (!id) throw new BareError(400, {\n    code: 'INVALID_BARE_HEADER',\n    id: `request.headers.sec-websocket-protocol`,\n    message: `Expected ID.`\n  });\n  const [remoteResponse, remoteSocket] = await upgradeBareFetch(request, request.signal, headers, remote);\n  const meta = await options.database.get(id);\n\n  if (meta?.value.v === 1) {\n    meta.value.response = {\n      headers: Object.fromEntries(remoteResponse.headers)\n    };\n    await options.database.set(id, meta);\n  }\n\n  return new Response(undefined, {\n    status: 101,\n    webSocket: remoteSocket\n  });\n};\n\nfunction registerV1(server) {\n  server.routes.set('/v1/', tunnelRequest$1);\n  server.routes.set('/v1/ws-new-meta', wsNewMeta);\n  server.routes.set('/v1/ws-meta', wsMeta);\n  server.socketRoutes.set('/v1/', tunnelSocket$1);\n}\n\nconst MAX_HEADER_VALUE = 3072;\n/**\n *\n * Splits headers according to spec\n * @param headers\n * @returns Split headers\n */\n\nfunction splitHeaders(headers) {\n  const output = new Headers(headers);\n\n  if (headers.has('x-bare-headers')) {\n    const value = headers.get('x-bare-headers');\n\n    if (value.length > MAX_HEADER_VALUE) {\n      output.delete('x-bare-headers');\n      let split = 0;\n\n      for (let i = 0; i < value.length; i += MAX_HEADER_VALUE) {\n        const part = value.slice(i, i + MAX_HEADER_VALUE);\n        const id = split++;\n        output.set(`x-bare-headers-${id}`, `;${part}`);\n      }\n    }\n  }\n\n  return output;\n}\n/**\n * Joins headers according to spec\n * @param headers\n * @returns Joined headers\n */\n\nfunction joinHeaders(headers) {\n  const output = new Headers(headers);\n  const prefix = 'x-bare-headers';\n\n  if (headers.has(`${prefix}-0`)) {\n    const join = [];\n\n    for (const [header, value] of headers) {\n      if (!header.startsWith(prefix)) {\n        continue;\n      }\n\n      if (!value.startsWith(';')) {\n        throw new BareError(400, {\n          code: 'INVALID_BARE_HEADER',\n          id: `request.headers.${header}`,\n          message: `Value didn't begin with semi-colon.`\n        });\n      }\n\n      const id = parseInt(header.slice(prefix.length + 1));\n      join[id] = value.slice(1);\n      output.delete(header);\n    }\n\n    output.set(prefix, join.join(''));\n  }\n\n  return output;\n}\n\nconst validProtocols = ['http:', 'https:', 'ws:', 'wss:'];\nconst forbiddenForwardHeaders = ['connection', 'transfer-encoding', 'host', 'connection', 'origin', 'referer'];\nconst forbiddenPassHeaders = ['vary', 'connection', 'transfer-encoding', 'access-control-allow-headers', 'access-control-allow-methods', 'access-control-expose-headers', 'access-control-max-age', 'access-control-request-headers', 'access-control-request-method']; // common defaults\n\nconst defaultForwardHeaders = ['accept-encoding', 'accept-language', 'sec-websocket-extensions', 'sec-websocket-key', 'sec-websocket-version'];\nconst defaultPassHeaders = ['content-encoding', 'content-length', 'last-modified']; // defaults if the client provides a cache key\n\nconst defaultCacheForwardHeaders = ['if-modified-since', 'if-none-match', 'cache-control'];\nconst defaultCachePassHeaders = ['cache-control', 'etag'];\nconst cacheNotModified = 304;\n\nfunction loadForwardedHeaders(forward, target, request) {\n  for (const header of forward) {\n    if (request.headers.has(header)) {\n      target[header] = request.headers.get(header);\n    }\n  }\n}\n\nconst splitHeaderValue = /,\\s*/g;\n\nfunction readHeaders(request) {\n  const remote = Object.setPrototypeOf({}, null);\n  const sendHeaders = Object.setPrototypeOf({}, null);\n  const passHeaders = [...defaultPassHeaders];\n  const passStatus = [];\n  const forwardHeaders = [...defaultForwardHeaders]; // should be unique\n\n  const cache = new URL(request.url).searchParams.has('cache');\n\n  if (cache) {\n    passHeaders.push(...defaultCachePassHeaders);\n    passStatus.push(cacheNotModified);\n    forwardHeaders.push(...defaultCacheForwardHeaders);\n  }\n\n  const headers = joinHeaders(request.headers);\n\n  for (const remoteProp of ['host', 'port', 'protocol', 'path']) {\n    const header = `x-bare-${remoteProp}`;\n\n    if (headers.has(header)) {\n      const value = headers.get(header);\n\n      switch (remoteProp) {\n        case 'port':\n          if (isNaN(parseInt(value))) {\n            throw new BareError(400, {\n              code: 'INVALID_BARE_HEADER',\n              id: `request.headers.${header}`,\n              message: `Header was not a valid integer.`\n            });\n          }\n\n          break;\n\n        case 'protocol':\n          if (!validProtocols.includes(value)) {\n            throw new BareError(400, {\n              code: 'INVALID_BARE_HEADER',\n              id: `request.headers.${header}`,\n              message: `Header was invalid`\n            });\n          }\n\n          break;\n      }\n\n      remote[remoteProp] = value;\n    } else {\n      throw new BareError(400, {\n        code: 'MISSING_BARE_HEADER',\n        id: `request.headers.${header}`,\n        message: `Header was not specified.`\n      });\n    }\n  }\n\n  if (headers.has('x-bare-headers')) {\n    try {\n      const json = JSON.parse(headers.get('x-bare-headers'));\n\n      for (const header in json) {\n        const value = json[header];\n\n        if (typeof value === 'string') {\n          sendHeaders[header] = value;\n        } else if (Array.isArray(value)) {\n          const array = [];\n\n          for (const val in value) {\n            if (typeof val !== 'string') {\n              throw new BareError(400, {\n                code: 'INVALID_BARE_HEADER',\n                id: `bare.headers.${header}`,\n                message: `Header was not a String.`\n              });\n            }\n\n            array.push(val);\n          }\n\n          sendHeaders[header] = array;\n        } else {\n          throw new BareError(400, {\n            code: 'INVALID_BARE_HEADER',\n            id: `bare.headers.${header}`,\n            message: `Header was not a String.`\n          });\n        }\n      }\n    } catch (error) {\n      if (error instanceof SyntaxError) {\n        throw new BareError(400, {\n          code: 'INVALID_BARE_HEADER',\n          id: `request.headers.x-bare-headers`,\n          message: `Header contained invalid JSON. (${error.message})`\n        });\n      } else {\n        throw error;\n      }\n    }\n  } else {\n    throw new BareError(400, {\n      code: 'MISSING_BARE_HEADER',\n      id: `request.headers.x-bare-headers`,\n      message: `Header was not specified.`\n    });\n  }\n\n  if (headers.has('x-bare-pass-status')) {\n    const parsed = headers.get('x-bare-pass-status').split(splitHeaderValue);\n\n    for (const value of parsed) {\n      const number = parseInt(value);\n\n      if (isNaN(number)) {\n        throw new BareError(400, {\n          code: 'INVALID_BARE_HEADER',\n          id: `request.headers.x-bare-pass-status`,\n          message: `Array contained non-number value.`\n        });\n      } else {\n        passStatus.push(number);\n      }\n    }\n  }\n\n  if (headers.has('x-bare-pass-headers')) {\n    const parsed = headers.get('x-bare-pass-headers').split(splitHeaderValue);\n\n    for (let header of parsed) {\n      header = header.toLowerCase();\n\n      if (forbiddenPassHeaders.includes(header)) {\n        throw new BareError(400, {\n          code: 'FORBIDDEN_BARE_HEADER',\n          id: `request.headers.x-bare-forward-headers`,\n          message: `A forbidden header was passed.`\n        });\n      } else {\n        passHeaders.push(header);\n      }\n    }\n  }\n\n  if (headers.has('x-bare-forward-headers')) {\n    const parsed = headers.get('x-bare-forward-headers').split(splitHeaderValue);\n\n    for (let header of parsed) {\n      header = header.toLowerCase();\n\n      if (forbiddenForwardHeaders.includes(header)) {\n        throw new BareError(400, {\n          code: 'FORBIDDEN_BARE_HEADER',\n          id: `request.headers.x-bare-forward-headers`,\n          message: `A forbidden header was forwarded.`\n        });\n      } else {\n        forwardHeaders.push(header);\n      }\n    }\n  }\n\n  return {\n    remote,\n    sendHeaders,\n    passHeaders,\n    passStatus,\n    forwardHeaders\n  };\n}\n\nconst tunnelRequest = async request => {\n  const {\n    remote,\n    sendHeaders,\n    passHeaders,\n    passStatus,\n    forwardHeaders\n  } = readHeaders(request);\n  loadForwardedHeaders(forwardHeaders, sendHeaders, request);\n  const response = await bareFetch(request, request.signal, sendHeaders, remote);\n  const responseHeaders = new Headers();\n\n  for (const [header, value] of passHeaders) {\n    if (!response.headers.has(header)) continue;\n    responseHeaders.set(header, value);\n  }\n\n  const status = passStatus.includes(response.status) ? response.status : 200;\n\n  if (status !== cacheNotModified) {\n    responseHeaders.set('x-bare-status', response.status.toString());\n    responseHeaders.set('x-bare-status-text', response.statusText);\n    responseHeaders.set('x-bare-headers', JSON.stringify(Object.fromEntries(response.headers)));\n  }\n\n  return new Response(response.body, {\n    status,\n    headers: splitHeaders(responseHeaders)\n  });\n};\n\nconst metaExpiration = 30e3;\n\nconst getMeta = async (request, options) => {\n  if (request.method === 'OPTIONS') {\n    return new Response(undefined, {\n      status: 200\n    });\n  }\n\n  if (!request.headers.has('x-bare-id')) {\n    throw new BareError(400, {\n      code: 'MISSING_BARE_HEADER',\n      id: 'request.headers.x-bare-id',\n      message: 'Header was not specified'\n    });\n  }\n\n  const id = request.headers.get('x-bare-id');\n  const meta = await options.database.get(id);\n  if (meta?.value.v !== 2) throw new BareError(400, {\n    code: 'INVALID_BARE_HEADER',\n    id: 'request.headers.x-bare-id',\n    message: 'Unregistered ID'\n  });\n  if (!meta.value.response) throw new BareError(400, {\n    code: 'INVALID_BARE_HEADER',\n    id: 'request.headers.x-bare-id',\n    message: 'Meta not ready'\n  });\n  await options.database.delete(id);\n  const responseHeaders = new Headers();\n  responseHeaders.set('x-bare-status', meta.value.response.status.toString());\n  responseHeaders.set('x-bare-status-text', meta.value.response.statusText);\n  responseHeaders.set('x-bare-headers', JSON.stringify(meta.value.response.headers));\n  return new Response(undefined, {\n    status: 200,\n    headers: splitHeaders(responseHeaders)\n  });\n};\n\nconst newMeta = async (request, options) => {\n  const {\n    remote,\n    sendHeaders,\n    forwardHeaders\n  } = readHeaders(request);\n  const id = randomHex(16);\n  await options.database.set(id, {\n    expires: Date.now() + metaExpiration,\n    value: {\n      v: 2,\n      remote,\n      sendHeaders,\n      forwardHeaders\n    }\n  });\n  return new Response(id);\n};\n\nconst tunnelSocket = async (request, options) => {\n  const id = request.headers.get('sec-websocket-protocol');\n  if (!id) throw new BareError(400, {\n    code: 'INVALID_BARE_HEADER',\n    id: `request.headers.sec-websocket-protocol`,\n    message: `Expected ID.`\n  });\n  const meta = await options.database.get(id);\n  if (meta?.value.v !== 2) throw new BareError(400, {\n    code: 'INVALID_BARE_HEADER',\n    id: `request.headers.sec-websocket-protocol`,\n    message: `Bad ID.`\n  });\n  loadForwardedHeaders(meta.value.forwardHeaders, meta.value.sendHeaders, request);\n  const [remoteResponse, remoteSocket] = await upgradeBareFetch(request, request.signal, meta.value.sendHeaders, meta.value.remote); // https://developers.cloudflare.com/workers/learning/using-websockets\n  // returning it on to a client....\n\n  meta.value.response = {\n    headers: Object.fromEntries(remoteResponse.headers),\n    status: remoteResponse.status,\n    statusText: remoteResponse.statusText\n  };\n  await options.database.set(id, meta);\n  return new Response(undefined, {\n    status: 101,\n    webSocket: remoteSocket\n  });\n};\n\nfunction registerV2(server) {\n  server.routes.set('/v2/', tunnelRequest);\n  server.routes.set('/v2/ws-new-meta', newMeta);\n  server.routes.set('/v2/ws-meta', getMeta);\n  server.socketRoutes.set('/v2/', tunnelSocket);\n}\n\n/**\n * Create a Bare server.\n * This will handle all lifecycles for unspecified options (httpAgent, httpsAgent, metaMap).\n */\n\nfunction createBareServer(directory, init = {}) {\n  if (typeof directory !== 'string') throw new Error('Directory must be specified.');\n  if (!directory.startsWith('/') || !directory.endsWith('/')) throw new RangeError('Directory must start and end with /');\n  init.logErrors ??= false;\n  const cleanup = [];\n\n  if (!init.database) {\n    const database = new Map();\n    const interval = setInterval(() => cleanupDatabase(database), 1000);\n    init.database = database;\n    cleanup.push(() => clearInterval(interval));\n  }\n\n  const server = new Server(directory, { ...init,\n    database: new JSONDatabaseAdapter(init.database)\n  });\n  registerV1(server);\n  registerV2(server);\n  server.addEventListener('close', () => {\n    for (const cb of cleanup) cb();\n  });\n  return server;\n}\n\nconst kvDB = new KVAdapter(bare);\nconst bare = createBareServer('/', {\n  logErrors: true,\n  database: kvDB\n});\naddEventListener('fetch', event => {\n  cleanupDatabase(kvDB);\n  if (bare.shouldRoute(event.request)) event.respondWith(bare.routeRequest(event.request));\n});\n"],
  "mappings": "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",
  "names": ["ctx", "codes", "status", "toIdentifier", "json"]
}
